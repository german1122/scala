{% extends "base0.html" %}
{% block content %}


<!--canvas class="my-4 w-100" id="balance" width="900" height="380"></canvas>
<h4>Valor de saldos en cuentas por cobrar: {{cartera}}</h4>
<h4>Valor de saldos de pasivos: {{pasivos}}</h4>
<h4>Cartera Activa (largo plazo): {{cpc}}</h4>
<h4>Cartera Pasiva (largo plazo): {{cpp}}</h4>
<h4>Valor de la empresa al día: {{valor_e}}</h4>
<h4>Valor de la empresa incluyendo residuales: {{valor_eR}}</h4-->
<h1>Colocación y Acumulado Histórico: Arrendamiento Puro</h1>
<canvas class="my-4 w-100" id="cartera" width="1000" height="400"></canvas>
<h1> Arrendamiento Puro: Intereses & Amortizaciones Acumulados/mes (histórico)</h1>
<canvas class="my-4 w-100" id="profit-loss" width="1000" height="400"></canvas>
<h1>Ejercicio 2021: pagos devengados durante 2021</h1>
<h4>Pagos devengados en Proyectos de Crédito Simple y Prendario (Incluye Valor liquidación) ejercicio</h4>
<div class="table-responsive">
    <table class = "table table-striped table-sm"  style="width: unset;">
        <thead>
            <tr>
                {% for col in creditonames_2021 %}
                <th>

                    {{col}}

                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in reporte_credito21 %}
            <tr>
                {% for col, row_ in zip(creditonames_2021, row) %}
                <td>{{row_}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
      </table>
  </div>
<h4>Pagos devengados en Proyectos de Arrendamiento Puro ejercicio 2021</h4>
<div class="table-responsive">
    <table class = "table table-striped table-sm"  style="width: unset;">
        <thead>
            <tr>
                {% for col in ap_2021_names %}
                <th>

                    {{col}}

                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in ap_2021_rows %}
            <tr>
                {% for col, row_ in zip(ap_2021_names, row) %}
                <td>{{row_}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
      </table>
  </div>
  <h4>Pagos devengados en Proyectos de Capital al Vencimiento ejercicio 2021</h4>

  <div class="table-responsive">
      <table class = "table table-striped table-sm"  style="width: unset;">
          <thead>
              <tr>
                  {% for col in creditonames_2021 %}
                  <th>

                      {{col}}

                  </th>
                  {% endfor %}
              </tr>
          </thead>
          <tbody>
              {% for row in reporte_global21 %}
              <tr>
                  {% for col, row_ in zip(credito_names, row) %}
                  <td>{{row_}}</td>
                  {% endfor %}
              </tr>
              {% endfor %}
          </tbody>
        </table>
    </div>
<h1>Cuentas por Cobrar (Corte de Caja a {{hoy}})</h1>


<h4>Cuentas por cobrar Proyectos de Arrendamiento Puro</h4>
<div class="table-responsive">
    <table class = "table table-striped table-sm"  style="width: unset;">
        <thead>
            <tr>
                {% for col in ap_columns %}
                <th>

                    {{col}}

                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in ap_rows %}
            <tr>
                {% for col, row_ in zip(ap_columns, row) %}
                <td>{{row_}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
      </table>
  </div>

  <h4>Cuentas por cobrar Proyectos de Crédito Simple y Prendario</h4>
  <div class="table-responsive">
      <table class = "table table-striped table-sm"  style="width: unset;">
          <thead>
              <tr>
                  {% for col in credito_names %}
                  <th>

                      {{col}}

                  </th>
                  {% endfor %}
              </tr>
          </thead>
          <tbody>
              {% for row in reporte_credito %}
              <tr>
                  {% for col, row_ in zip(credito_names, row) %}
                  <td>{{row_}}</td>
                  {% endfor %}
              </tr>
              {% endfor %}
          </tbody>
        </table>
    </div>



    <h4>Cuentas por cobrar Proyectos de Capital al Vencimiento</h4>

    <div class="table-responsive">
        <table class = "table table-striped table-sm"  style="width: unset;">
            <thead>
                <tr>
                    {% for col in credito_names %}
                    <th>

                        {{col}}

                    </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in reporte_global %}
                <tr>
                    {% for col, row_ in zip(credito_names, row) %}
                    <td>{{row_}}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
          </table>
      </div>


      <h1>Ejercicio 2021: Cartera Pasiva (Corte de Caja a {{hoy}})</h1>

      <br>  </br>
      <h2>Pagos realizados a fondeadores en 2021</h2>

      <div class="table-responsive">
          <table class = "table table-striped table-sm"  style="width: unset;">
              <thead>
                  <tr>
                      {% for col in fondeo_2021 %}
                      <th>

                          {{col}}

                      </th>
                      {% endfor %}
                  </tr>
              </thead>
              <tbody>
                  {% for row in reporte_fondeo21 %}
                  <tr>
                      {% for col, row_ in zip(fondeo_names, row) %}
                      <td>{{row_}}</td>
                      {% endfor %}
                  </tr>
                  {% endfor %}
              </tbody>
            </table>
        </div>
        <h2>Cuentas por pagar a fondeadores desde corte de caja</h2>

        <div class="table-responsive">
            <table class = "table table-striped table-sm"  style="width: unset;">
                <thead>
                    <tr>
                        {% for col in fondeo_names %}
                        <th>

                            {{col}}

                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in reporte_fondeo %}
                    <tr>
                        {% for col, row_ in zip(fondeo_names, row) %}
                        <td>{{row_}}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
              </table>
              <br><br>

              <a class="btn btn-primary" type="button" onclick="tableToCSV()">Descargar CSV</a>
          </div>



<script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
<script src="{{url_for('static', filename='assets/js/dashboard.js') }}">var camara = '{{ datal }};'</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
<script src="{{url_for('reportes.script')}}"></script>
<script src="{{url_for('reportes.balance')}}"></script>
<script src="{{url_for('reportes.cartera')}}"></script>
<script src="{{url_for('reportes.profit_loss')}}"></script>
<script src="js/jquery-1.11.0.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/wow.min.js"></script>


<script>
    function timing() {
        $.ajax({
            method: "POST",
            url: "{{ url_for('reportes.home')}}",
            data: {{rows_inversion}},
            success: function(data) {
                // do something
            }
        });
    }
</script>
<script type="text/javascript">
        function tableToCSV() {

            // Variable to store the final csv data
            var csv_data = [];

            // Get each row data
            var rows = document.getElementsByTagName('tr');
            for (var i = 0; i < rows.length; i++) {

                // Get each column data
                var cols = rows[i].querySelectorAll('td,th');

                // Stores each csv row data
                var csvrow = [];
                for (var j = 0; j < cols.length; j++) {

                    // Get the text data of each cell
                    // of a row and push it to csvrow
                    csvrow.push(cols[j].innerHTML);
                }

                // Combine each column value with comma
                csv_data.push(csvrow.join(","));
            }

            // Combine each row data with new line character
            csv_data = csv_data.join('\n');

            // Call this function to download csv file
            downloadCSVFile(csv_data);

        }

        function downloadCSVFile(csv_data) {

            // Create CSV file object and feed
            // our csv_data into it
            CSVFile = new Blob([csv_data], {
                type: "text/csv"
            });

            // Create to temporary link to initiate
            // download process
            var temp_link = document.createElement('a');

            // Download csv file
            temp_link.download = "reporte_contable.csv";
            var url = window.URL.createObjectURL(CSVFile);
            temp_link.href = url;

            // This link should not be displayed
            temp_link.style.display = "none";
            document.body.appendChild(temp_link);

            // Automatically click the link to
            // trigger download
            temp_link.click();
            document.body.removeChild(temp_link);
        }
    </script>


{% endblock %}
